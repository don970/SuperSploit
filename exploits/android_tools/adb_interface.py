import json

from ppadb.client import Client as AdbClient

# integrated = True
#!#!#!
# This uses pure-python-adb to create a
# wrapper to interface with a device via
# adb over an usb connection
####################################################
# REQUIRED OPTIONS
# ADB_HOST: The host the server runs on
# ADB_PORT: the port the server is running on default
#!#!#!

with open(".data/data.json") as file:
    di = json.load(file)
    file.close()

# Default is "127.0.0.1" and 5037
client = AdbClient(host=di["ADB_HOST"], port=int(di["ADB_PORT"]))

devices = client.devices()
def code():
    if len(devices) < 1:
        return "No devices connected"
    for x in devices:
        print(f"{x.get_serial_no()}")

print(code())
